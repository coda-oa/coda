<div {% if form_id %}id="{{ form_id }}"{% endif %}
     class="htmx-formset-wrapper"
     hx-vals='{ "prefix": "{{ prefix }}", "mode": "{{ mode }}", "table_classes": "{{ table_classes }}"}'>
    {% if form_id %}<input type="hidden" name="{{ prefix }}-form_id" value="{{ form_id }}">{% endif %}
    {% if prefix %}
        <input type="hidden"
               name="{{ prefix }}-total_forms"
               value="{{ total_forms }}">
    {% else %}
        <input type="hidden" name="total_forms" value="{{ total_forms }}">
    {% endif %}
    {% if mode == "inline" %}
        {% include "htmx_formset_inline.html" %}
    {% else %}
        {% for form in formset %}
            {% if mode == "paragraph" %}
                {{ form.as_p }}
            {% elif mode == "div" %}
                {{ form.as_div }}
            {% else %}
                {{ form }}
            {% endif %}
            {% include "htmx_formset_remove_button.html" with counter=forloop.counter %}
        {% endfor %}
        {% include "htmx_formset_add_button.html" %}
    {% endif %}
</div>
